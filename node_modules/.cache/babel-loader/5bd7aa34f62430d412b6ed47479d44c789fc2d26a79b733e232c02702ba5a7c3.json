{"ast":null,"code":"import _objectSpread from\"E:/Makonis/New folder/Makonis/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/Makonis/New folder/Makonis/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useEffect}from\"react\";import Chunk from\"./Chunk\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProgressBar=function ProgressBar(_ref){var duration=_ref.duration,onTimeUpdate=_ref.onTimeUpdate,chunks=_ref.chunks,videotimeNow=_ref.videotimeNow;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentTime=_useState2[0],setCurrentTime=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),progressTime=_useState4[0],setProgressTime=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),progressWidth=_useState6[0],setProgressWidth=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),exactProgress=_useState8[0],setExactProgress=_useState8[1];var progressBarRef=useRef(null);var progressBarWrapperRef=useRef(null);var chunksToShow=[];var uniqueTopics=chunks.reduce(function(acc,topic){if(!acc[topic.topic]){acc[topic.topic]=_objectSpread({},topic);}else{acc[topic.topic].end=topic.end;}return acc;},{});chunks=Object.values(uniqueTopics).map(function(topic){return _objectSpread(_objectSpread({},topic),{},{start:topic.start});});var handleProgressClick=function handleProgressClick(event){event.preventDefault();var progressBar=progressBarRef.current;var progressClicked=event.clientX-progressBar.getBoundingClientRect().left;var newTime=progressClicked/progressWidth*duration;var newProgress=progressClicked/progressWidth*100;setProgressTime(progressClicked);onTimeUpdate(newTime);setExactProgress(newProgress);};var progress=exactProgress/100*duration;chunks.forEach(function(chunk){var chunkClass=progress>=chunk.start&&progress<=chunk.end?\"chunk active\":\"chunk\";if(progress>=chunk.end){chunksToShow.push(/*#__PURE__*/_jsx(\"div\",{className:chunkClass},\"\".concat(chunk.start,\"-\").concat(chunk.end)));}});useEffect(function(){var progressBar=progressBarRef.current;var handleTimeUpdate=function handleTimeUpdate(){setCurrentTime(progressBar.currentTime);};progressBar.addEventListener(\"timeupdate\",handleTimeUpdate);},[]);useEffect(function(){var progressBarWrapper=progressBarWrapperRef.current;var handleResize=function handleResize(){setProgressWidth(progressBarWrapper.offsetWidth);};handleResize();window.addEventListener(\"resize\",handleResize);return function(){window.removeEventListener(\"resize\",handleResize);};},[progressBarWrapperRef]);var renderChunks=function renderChunks(){return chunks.map(function(chunk,index){return/*#__PURE__*/_jsx(Chunk,_objectSpread(_objectSpread({},chunk),{},{duration:duration,progress:progress}),index);});};return/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar-wrapper\",ref:progressBarWrapperRef,onClick:handleProgressClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar\",ref:progressBarRef,children:[renderChunks(),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar-thumb\",style:{left:\"\".concat(videotimeNow,\"%\")}})]})});};export default ProgressBar;","map":{"version":3,"names":["React","useRef","useState","useEffect","Chunk","jsx","_jsx","jsxs","_jsxs","ProgressBar","_ref","duration","onTimeUpdate","chunks","videotimeNow","_useState","_useState2","_slicedToArray","currentTime","setCurrentTime","_useState3","_useState4","progressTime","setProgressTime","_useState5","_useState6","progressWidth","setProgressWidth","_useState7","_useState8","exactProgress","setExactProgress","progressBarRef","progressBarWrapperRef","chunksToShow","uniqueTopics","reduce","acc","topic","_objectSpread","end","Object","values","map","start","handleProgressClick","event","preventDefault","progressBar","current","progressClicked","clientX","getBoundingClientRect","left","newTime","newProgress","progress","forEach","chunk","chunkClass","push","className","concat","handleTimeUpdate","addEventListener","progressBarWrapper","handleResize","offsetWidth","window","removeEventListener","renderChunks","index","ref","onClick","children","style"],"sources":["E:/Makonis/New folder/Makonis/my-app/src/Components/SubComponents/Progressbar/ProgressBar.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport Chunk from \"./Chunk\";\r\n\r\nconst ProgressBar = ({ duration, onTimeUpdate, chunks, videotimeNow }) => {\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [progressTime, setProgressTime] = useState(0);\r\n  const [progressWidth, setProgressWidth] = useState(0);\r\n  const [exactProgress, setExactProgress] = useState(0);\r\n\r\n  const progressBarRef = useRef(null);\r\n  const progressBarWrapperRef = useRef(null);\r\n\r\n  let chunksToShow = [];\r\n\r\n  const uniqueTopics = chunks.reduce((acc, topic) => {\r\n    if (!acc[topic.topic]) {\r\n      acc[topic.topic] = { ...topic };\r\n    } else {\r\n      acc[topic.topic].end = topic.end;\r\n    }\r\n    return acc;\r\n  }, {});\r\n\r\n  chunks = Object.values(uniqueTopics).map((topic) => ({ ...topic, start: topic.start }));\r\n\r\n  const handleProgressClick = (event) => {\r\n    event.preventDefault();\r\n    const progressBar = progressBarRef.current;\r\n    const progressClicked = event.clientX - progressBar.getBoundingClientRect().left;\r\n    const newTime = (progressClicked / progressWidth) * duration;\r\n    const newProgress = (progressClicked / progressWidth) * 100;\r\n    setProgressTime(progressClicked);\r\n    onTimeUpdate(newTime);\r\n    setExactProgress(newProgress);\r\n  };\r\n\r\n  const progress = (exactProgress / 100) * duration;\r\n\r\n  chunks.forEach((chunk) => {\r\n    const chunkClass =\r\n      progress >= chunk.start && progress <= chunk.end ? \"chunk active\" : \"chunk\";\r\n\r\n    if (progress >= chunk.end) {\r\n      chunksToShow.push(\r\n        <div className={chunkClass} key={`${chunk.start}-${chunk.end}`} />\r\n      );\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const progressBar = progressBarRef.current;\r\n\r\n    const handleTimeUpdate = () => {\r\n      setCurrentTime(progressBar.currentTime);\r\n    };\r\n\r\n    progressBar.addEventListener(\"timeupdate\", handleTimeUpdate);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const progressBarWrapper = progressBarWrapperRef.current;\r\n    const handleResize = () => {\r\n      setProgressWidth(progressBarWrapper.offsetWidth);\r\n    };\r\n\r\n    handleResize();\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n    };\r\n  }, [progressBarWrapperRef]);\r\n\r\n  const renderChunks = () => {\r\n    return chunks.map((chunk, index) => (\r\n      <Chunk\r\n        key={index}\r\n        {...chunk}\r\n        duration={duration}\r\n        progress={progress}\r\n      />\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"progress-bar-wrapper\"\r\n      ref={progressBarWrapperRef}\r\n      onClick={handleProgressClick}\r\n    >\r\n      <div className=\"progress-bar\" ref={progressBarRef}>\r\n        {renderChunks()}\r\n        <div\r\n          className=\"progress-bar-thumb\"\r\n          style={{ left: `${videotimeNow}%` }}\r\n        />\r\n        {/* \r\n          <div className=\"exact-progress-bar\" style={{ width: `${exactProgress}%` }}>\r\n            <div className=\"exact-progress-bar-label\">\r\n              //{exactProgress.toFixed(2)}% \r\n              <div id='labelprogress-box'></div>\r\n            </div>\r\n          </div>\r\n        */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressBar;\r\n"],"mappings":"mPAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1D,MAAO,CAAAC,KAAK,KAAM,SAAS,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5B,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAAC,IAAA,CAAyD,IAAnD,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAAEC,YAAY,CAAAF,IAAA,CAAZE,YAAY,CAAEC,MAAM,CAAAH,IAAA,CAANG,MAAM,CAAEC,YAAY,CAAAJ,IAAA,CAAZI,YAAY,CACjE,IAAAC,SAAA,CAAsCb,QAAQ,CAAC,CAAC,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA1CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAClC,IAAAI,UAAA,CAAwClB,QAAQ,CAAC,CAAC,CAAC,CAAAmB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA5CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IACpC,IAAAG,UAAA,CAA0CtB,QAAQ,CAAC,CAAC,CAAC,CAAAuB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA9CE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IACtC,IAAAG,UAAA,CAA0C1B,QAAQ,CAAC,CAAC,CAAC,CAAA2B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA9CE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IAEtC,GAAM,CAAAG,cAAc,CAAG/B,MAAM,CAAC,IAAI,CAAC,CACnC,GAAM,CAAAgC,qBAAqB,CAAGhC,MAAM,CAAC,IAAI,CAAC,CAE1C,GAAI,CAAAiC,YAAY,CAAG,EAAE,CAErB,GAAM,CAAAC,YAAY,CAAGtB,MAAM,CAACuB,MAAM,CAAC,SAACC,GAAG,CAAEC,KAAK,CAAK,CACjD,GAAI,CAACD,GAAG,CAACC,KAAK,CAACA,KAAK,CAAC,CAAE,CACrBD,GAAG,CAACC,KAAK,CAACA,KAAK,CAAC,CAAAC,aAAA,IAAQD,KAAK,CAAE,CACjC,CAAC,IAAM,CACLD,GAAG,CAACC,KAAK,CAACA,KAAK,CAAC,CAACE,GAAG,CAAGF,KAAK,CAACE,GAAG,CAClC,CACA,MAAO,CAAAH,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAAC,CAENxB,MAAM,CAAG4B,MAAM,CAACC,MAAM,CAACP,YAAY,CAAC,CAACQ,GAAG,CAAC,SAACL,KAAK,SAAAC,aAAA,CAAAA,aAAA,IAAWD,KAAK,MAAEM,KAAK,CAAEN,KAAK,CAACM,KAAK,IAAG,CAAC,CAEvF,GAAM,CAAAC,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAIC,KAAK,CAAK,CACrCA,KAAK,CAACC,cAAc,EAAE,CACtB,GAAM,CAAAC,WAAW,CAAGhB,cAAc,CAACiB,OAAO,CAC1C,GAAM,CAAAC,eAAe,CAAGJ,KAAK,CAACK,OAAO,CAAGH,WAAW,CAACI,qBAAqB,EAAE,CAACC,IAAI,CAChF,GAAM,CAAAC,OAAO,CAAIJ,eAAe,CAAGxB,aAAa,CAAIf,QAAQ,CAC5D,GAAM,CAAA4C,WAAW,CAAIL,eAAe,CAAGxB,aAAa,CAAI,GAAG,CAC3DH,eAAe,CAAC2B,eAAe,CAAC,CAChCtC,YAAY,CAAC0C,OAAO,CAAC,CACrBvB,gBAAgB,CAACwB,WAAW,CAAC,CAC/B,CAAC,CAED,GAAM,CAAAC,QAAQ,CAAI1B,aAAa,CAAG,GAAG,CAAInB,QAAQ,CAEjDE,MAAM,CAAC4C,OAAO,CAAC,SAACC,KAAK,CAAK,CACxB,GAAM,CAAAC,UAAU,CACdH,QAAQ,EAAIE,KAAK,CAACd,KAAK,EAAIY,QAAQ,EAAIE,KAAK,CAAClB,GAAG,CAAG,cAAc,CAAG,OAAO,CAE7E,GAAIgB,QAAQ,EAAIE,KAAK,CAAClB,GAAG,CAAE,CACzBN,YAAY,CAAC0B,IAAI,cACftD,IAAA,QAAKuD,SAAS,CAAEF,UAAW,KAAAG,MAAA,CAASJ,KAAK,CAACd,KAAK,MAAAkB,MAAA,CAAIJ,KAAK,CAAClB,GAAG,EAAM,CACnE,CACH,CACF,CAAC,CAAC,CAEFrC,SAAS,CAAC,UAAM,CACd,GAAM,CAAA6C,WAAW,CAAGhB,cAAc,CAACiB,OAAO,CAE1C,GAAM,CAAAc,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAC7B5C,cAAc,CAAC6B,WAAW,CAAC9B,WAAW,CAAC,CACzC,CAAC,CAED8B,WAAW,CAACgB,gBAAgB,CAAC,YAAY,CAAED,gBAAgB,CAAC,CAC9D,CAAC,CAAE,EAAE,CAAC,CAEN5D,SAAS,CAAC,UAAM,CACd,GAAM,CAAA8D,kBAAkB,CAAGhC,qBAAqB,CAACgB,OAAO,CACxD,GAAM,CAAAiB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzBvC,gBAAgB,CAACsC,kBAAkB,CAACE,WAAW,CAAC,CAClD,CAAC,CAEDD,YAAY,EAAE,CACdE,MAAM,CAACJ,gBAAgB,CAAC,QAAQ,CAAEE,YAAY,CAAC,CAE/C,MAAO,WAAM,CACXE,MAAM,CAACC,mBAAmB,CAAC,QAAQ,CAAEH,YAAY,CAAC,CACpD,CAAC,CACH,CAAC,CAAE,CAACjC,qBAAqB,CAAC,CAAC,CAE3B,GAAM,CAAAqC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzB,MAAO,CAAAzD,MAAM,CAAC8B,GAAG,CAAC,SAACe,KAAK,CAAEa,KAAK,qBAC7BjE,IAAA,CAACF,KAAK,CAAAmC,aAAA,CAAAA,aAAA,IAEAmB,KAAK,MACT/C,QAAQ,CAAEA,QAAS,CACnB6C,QAAQ,CAAEA,QAAS,GAHde,KAAK,CAIV,EACH,CAAC,CACJ,CAAC,CAED,mBACEjE,IAAA,QACEuD,SAAS,CAAC,sBAAsB,CAChCW,GAAG,CAAEvC,qBAAsB,CAC3BwC,OAAO,CAAE5B,mBAAoB,CAAA6B,QAAA,cAE7BlE,KAAA,QAAKqD,SAAS,CAAC,cAAc,CAACW,GAAG,CAAExC,cAAe,CAAA0C,QAAA,EAC/CJ,YAAY,EAAE,cACfhE,IAAA,QACEuD,SAAS,CAAC,oBAAoB,CAC9Bc,KAAK,CAAE,CAAEtB,IAAI,IAAAS,MAAA,CAAKhD,YAAY,KAAI,CAAE,EACpC,GASE,EACF,CAEV,CAAC,CAED,cAAe,CAAAL,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}