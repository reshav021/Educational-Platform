{"ast":null,"code":"import _objectSpread from\"C:/Users/reshav/Desktop/Makonis/my-app-copy/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/reshav/Desktop/Makonis/my-app-copy/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useEffect}from\"react\";import Chunk from\"./Chunk\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProgressBar=function ProgressBar(_ref){var _progressBarRef$curre;var duration=_ref.duration,onTimeUpdate=_ref.onTimeUpdate,chunks=_ref.chunks,videotimeNow=_ref.videotimeNow;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentTime=_useState2[0],setCurrentTime=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),progressTime=_useState4[0],setProgressTime=_useState4[1];var progressBarRef=useRef(null);/*\r\n  const uniqueTopics = chunks.reduce((acc, topic) => {\r\n    if (!acc[topic.topic]) {\r\n      acc[topic.topic] = topic;\r\n    }\r\n    return acc;\r\n  }, {});\r\n  \r\n  chunks = Object.values(uniqueTopics);\r\n  */ //Take first starting value and last ending value for duplicate topics keyword\nvar uniqueTopics=chunks.reduce(function(acc,topic){if(!acc[topic.topic]){acc[topic.topic]=_objectSpread({},topic);}else{acc[topic.topic].end=topic.end;}return acc;},{});chunks=Object.values(uniqueTopics).map(function(topic){return _objectSpread(_objectSpread({},topic),{},{start:topic.start});});//console.log(chunks)\nvar progressBarWrapperRef=useRef(null);var handleProgressClick=function handleProgressClick(event){event.preventDefault();var progressBar=progressBarRef.current;var progressWidth=progressBar.offsetWidth;var progressClicked=event.clientX-progressBar.getBoundingClientRect().left;var newTime=progressClicked/progressWidth*duration;setProgressTime(progressClicked);onTimeUpdate(newTime);};var progress=currentTime/duration*100;var timeNow=currentTime/((_progressBarRef$curre=progressBarRef.current)===null||_progressBarRef$curre===void 0?void 0:_progressBarRef$curre.duration)*100;var chunksToShow=[];chunks.forEach(function(chunk){var chunkClass=progress>=chunk.start&&progress<=chunk.end?\"chunk active\":\"chunk\";if(progress>=chunk.end){chunksToShow.push(/*#__PURE__*/_jsx(\"div\",{className:chunkClass},\"\".concat(chunk.start,\"-\").concat(chunk.end)));}});useEffect(function(){var progressBar=progressBarRef.current;var handleTimeUpdate=function handleTimeUpdate(){setCurrentTime(progressBar.currentTime);};progressBar.addEventListener(\"timeupdate\",handleTimeUpdate);},[]);var renderChunks=function renderChunks(){return chunks.map(function(chunk,index){return/*#__PURE__*/_jsx(Chunk,_objectSpread(_objectSpread({},chunk),{},{duration:duration,progressTime:progressTime}),index);});};//console.log(videotimeNow)\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar-wrapper\",ref:progressBarWrapperRef,onClick:handleProgressClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar\",ref:progressBarRef,children:[renderChunks(),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar-thumb\",style:{left:\"\".concat(videotimeNow,\"%\")}})]})});};export default ProgressBar;","map":{"version":3,"names":["React","useRef","useState","useEffect","Chunk","jsx","_jsx","jsxs","_jsxs","ProgressBar","_ref","_progressBarRef$curre","duration","onTimeUpdate","chunks","videotimeNow","_useState","_useState2","_slicedToArray","currentTime","setCurrentTime","_useState3","_useState4","progressTime","setProgressTime","progressBarRef","uniqueTopics","reduce","acc","topic","_objectSpread","end","Object","values","map","start","progressBarWrapperRef","handleProgressClick","event","preventDefault","progressBar","current","progressWidth","offsetWidth","progressClicked","clientX","getBoundingClientRect","left","newTime","progress","timeNow","chunksToShow","forEach","chunk","chunkClass","push","className","concat","handleTimeUpdate","addEventListener","renderChunks","index","ref","onClick","children","style"],"sources":["C:/Users/reshav/Desktop/Makonis/my-app-copy/my-app/src/Components/SubComponents/Progressbar/ProgressBar.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\"\r\nimport Chunk from \"./Chunk\"\r\n\r\nconst ProgressBar = ({ duration, onTimeUpdate, chunks, videotimeNow }) => {\r\n  const [currentTime, setCurrentTime] = useState(0)\r\n  const [progressTime, setProgressTime] = useState(0)\r\n  const progressBarRef = useRef(null)\r\n  \r\n  /*\r\n  const uniqueTopics = chunks.reduce((acc, topic) => {\r\n    if (!acc[topic.topic]) {\r\n      acc[topic.topic] = topic;\r\n    }\r\n    return acc;\r\n  }, {});\r\n  \r\n  chunks = Object.values(uniqueTopics);\r\n  */\r\n\r\n  //Take first starting value and last ending value for duplicate topics keyword\r\n  const uniqueTopics = chunks.reduce((acc, topic) => {\r\n    if (!acc[topic.topic]) {\r\n      acc[topic.topic] = { ...topic };\r\n    } \r\n    else {\r\n      acc[topic.topic].end = topic.end;\r\n    }\r\n    return acc;\r\n  }, {});\r\n  \r\n  chunks = Object.values(uniqueTopics).map(topic => ({ ...topic, start: topic.start }));\r\n  //console.log(chunks)\r\n  const progressBarWrapperRef = useRef(null);\r\n\r\n  const handleProgressClick = (event) => {\r\n    event.preventDefault();\r\n    const progressBar = progressBarRef.current\r\n    const progressWidth = progressBar.offsetWidth\r\n    const progressClicked = event.clientX - progressBar.getBoundingClientRect().left\r\n    const newTime = (progressClicked / progressWidth) * duration\r\n    setProgressTime(progressClicked)\r\n    onTimeUpdate(newTime)\r\n  }\r\n\r\n  const progress = (currentTime / duration) * 100\r\n  const timeNow = (currentTime / progressBarRef.current?.duration) * 100;\r\n\r\n  let chunksToShow = []\r\n\r\n  chunks.forEach((chunk) => {\r\n    const chunkClass =\r\n      progress >= chunk.start && progress <= chunk.end\r\n        ? \"chunk active\"\r\n        : \"chunk\"\r\n\r\n    if (progress >= chunk.end) {\r\n      chunksToShow.push(\r\n        <div className={chunkClass} key={`${chunk.start}-${chunk.end}`} />\r\n      )\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    const progressBar = progressBarRef.current\r\n\r\n    const handleTimeUpdate = () => {\r\n      setCurrentTime(progressBar.currentTime)\r\n    }\r\n\r\n    progressBar.addEventListener(\"timeupdate\", handleTimeUpdate)\r\n  }, [])\r\n\r\n  const renderChunks = () => {\r\n    return chunks.map((chunk, index) => (\r\n      <Chunk\r\n        key={index}\r\n        {...chunk}\r\n        duration={duration}\r\n        progressTime={progressTime}\r\n      />\r\n    ))\r\n  }\r\n\r\n  //console.log(videotimeNow)\r\n\r\n  return (\r\n    <div\r\n      className=\"progress-bar-wrapper\"\r\n      ref={progressBarWrapperRef}\r\n      onClick={handleProgressClick}\r\n    >\r\n      <div\r\n        className=\"progress-bar\"\r\n        ref={progressBarRef}\r\n      >\r\n        {renderChunks()}\r\n        <div\r\n          className=\"progress-bar-thumb\"\r\n          style={{ left: `${videotimeNow}%` }}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProgressBar"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}