{"version":3,"file":"react-new-window.js","sources":["../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/prop-types/index.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../src/NewWindow.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"],"sourcesContent":["function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/**\n * Component dependencies.\n */\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\n\n/**\n * The NewWindow class object.\n * @public\n */\n\nclass NewWindow extends React.PureComponent {\n  /**\n   * NewWindow default props.\n   */\n  static defaultProps = {\n    url: '',\n    name: '',\n    title: '',\n    features: { width: '600px', height: '640px' },\n    onBlock: null,\n    onOpen: null,\n    onUnload: null,\n    center: 'parent',\n    copyStyles: true,\n    closeOnUnmount: true\n  }\n\n  /**\n   * The NewWindow function constructor.\n   * @param {Object} props\n   */\n  constructor(props) {\n    super(props)\n    this.container = null\n    this.window = null\n    this.windowCheckerInterval = null\n    this.released = false\n    this.state = {\n      mounted: false\n    }\n  }\n\n  /**\n   * Render the NewWindow component.\n   */\n  render() {\n    if (!this.state.mounted) return null\n    return ReactDOM.createPortal(this.props.children, this.container)\n  }\n\n  componentDidMount() {\n    // In React 18, componentDidMount gets called twice\n    // causing openChild to get called twice\n    if (!this.window && !this.container) {\n      this.openChild()\n      this.setState({ mounted: true })  \n    }\n  }\n\n  /**\n   * Create the new window when NewWindow component mount.\n   */\n  openChild() {\n    const { url, title, name, features, onBlock, onOpen, center } = this.props\n\n    // Prepare position of the new window to be centered against the 'parent' window or 'screen'.\n    if (\n      typeof center === 'string' &&\n      (features.width === undefined || features.height === undefined)\n    ) {\n      console.warn(\n        'width and height window features must be present when a center prop is provided'\n      )\n    } else if (center === 'parent') {\n      features.left =\n        window.top.outerWidth / 2 + window.top.screenX - features.width / 2\n      features.top =\n        window.top.outerHeight / 2 + window.top.screenY - features.height / 2\n    } else if (center === 'screen') {\n      const screenLeft =\n        window.screenLeft !== undefined ? window.screenLeft : window.screen.left\n      const screenTop =\n        window.screenTop !== undefined ? window.screenTop : window.screen.top\n\n      const width = window.innerWidth\n        ? window.innerWidth\n        : document.documentElement.clientWidth\n        ? document.documentElement.clientWidth\n        : window.screen.width\n      const height = window.innerHeight\n        ? window.innerHeight\n        : document.documentElement.clientHeight\n        ? document.documentElement.clientHeight\n        : window.screen.height\n\n      features.left = width / 2 - features.width / 2 + screenLeft\n      features.top = height / 2 - features.height / 2 + screenTop\n    }\n\n    // Open a new window.\n    this.window = window.open(url, name, toWindowFeatures(features))\n    this.container = this.window.document.createElement('div')\n    // When a new window use content from a cross-origin there's no way we can attach event\n    // to it. Therefore, we need to detect in a interval when the new window was destroyed\n    // or was closed.\n    this.windowCheckerInterval = setInterval(() => {\n      if (!this.window || this.window.closed) {\n        this.release()\n      }\n    }, 50)\n\n    // Check if the new window was succesfully opened.\n    if (this.window) {\n      this.window.document.title = title\n\n      // Check if the container already exists as the window may have been already open\n      this.container = this.window.document.getElementById(\n        'new-window-container'\n      )\n      if (this.container === null) {\n        this.container = this.window.document.createElement('div')\n        this.container.setAttribute('id', 'new-window-container')\n        this.window.document.body.appendChild(this.container)\n      } else {\n        // Remove any existing content\n        const staticContainer = this.window.document.getElementById(\n          'new-window-container-static'\n        )\n        this.window.document.body.removeChild(staticContainer)\n      }\n\n      // If specified, copy styles from parent window's document.\n      if (this.props.copyStyles) {\n        setTimeout(() => copyStyles(document, this.window.document), 0)\n      }\n\n      if (typeof onOpen === 'function') {\n        onOpen(this.window)\n      }\n\n      // Release anything bound to this component before the new window unload.\n      this.window.addEventListener('beforeunload', () => this.release())\n    } else {\n      // Handle error on opening of new window.\n      if (typeof onBlock === 'function') {\n        onBlock(null)\n      } else {\n        console.warn('A new window could not be opened. Maybe it was blocked.')\n      }\n    }\n  }\n\n  /**\n   * Closes the opened window (if any) when NewWindow will unmount if the\n   * prop {closeOnUnmount} is true, otherwise the NewWindow will remain open\n   */\n  componentWillUnmount() {\n    // With React 18, componentWillUnmount gets called twice\n    // so only call componentWillUnmount when the `mounted` state\n    // is set\n    if (this.state.mounted && this.window) {\n      if (this.props.closeOnUnmount) {\n        this.window.close()\n      } else if (this.props.children) {\n        // Clone any children so they aren't removed when react stops rendering\n        const clone = this.container.cloneNode(true)\n        clone.setAttribute('id', 'new-window-container-static')\n        this.window.document.body.appendChild(clone)\n      }\n    }\n  }\n\n  /**\n   * Release the new window and anything that was bound to it.\n   */\n  release() {\n    // This method can be called once.\n    if (this.released) {\n      return\n    }\n    this.released = true\n\n    // Remove checker interval.\n    clearInterval(this.windowCheckerInterval)\n\n    // Call any function bound to the `onUnload` prop.\n    const { onUnload } = this.props\n\n    if (typeof onUnload === 'function') {\n      onUnload(null)\n    }\n  }\n}\n\nNewWindow.propTypes = {\n  children: PropTypes.node,\n  url: PropTypes.string,\n  name: PropTypes.string,\n  title: PropTypes.string,\n  features: PropTypes.object,\n  onUnload: PropTypes.func,\n  onBlock: PropTypes.func,\n  onOpen: PropTypes.func,\n  center: PropTypes.oneOf(['parent', 'screen']),\n  copyStyles: PropTypes.bool,\n  closeOnUnmount: PropTypes.bool\n}\n\n/**\n * Utility functions.\n * @private\n */\n\n/**\n * Copy styles from a source document to a target.\n * @param {Object} source\n * @param {Object} target\n * @private\n */\n\nfunction copyStyles(source, target) {\n  // Store style tags, avoid reflow in the loop\n  const headFrag = target.createDocumentFragment()\n\n  Array.from(source.styleSheets).forEach(styleSheet => {\n    // For <style> elements\n    let rules\n    try {\n      rules = styleSheet.cssRules\n    } catch (err) {\n      console.error(err)\n    }\n    if (rules) {\n      // IE11 is very slow for appendChild, so use plain string here\n      const ruleText = []\n\n      // Write the text of each rule into the body of the style element\n      Array.from(styleSheet.cssRules).forEach(cssRule => {\n        const { type } = cssRule\n\n        // Skip unknown rules\n        if (type === CSSRule.UNKNOWN_RULE) {\n          return\n        }\n\n        let returnText = ''\n\n        if (type === CSSRule.KEYFRAMES_RULE) {\n          // IE11 will throw error when trying to access cssText property, so we\n          // need to assemble them\n          returnText = getKeyFrameText(cssRule)\n        } else if (\n          [CSSRule.IMPORT_RULE, CSSRule.FONT_FACE_RULE].includes(type)\n        ) {\n          // Check if the cssRule type is CSSImportRule (3) or CSSFontFaceRule (5)\n          // to handle local imports on a about:blank page\n          // '/custom.css' turns to 'http://my-site.com/custom.css'\n          returnText = fixUrlForRule(cssRule)\n        } else {\n          returnText = cssRule.cssText\n        }\n        ruleText.push(returnText)\n      })\n\n      const newStyleEl = target.createElement('style')\n      newStyleEl.textContent = ruleText.join('\\n')\n      headFrag.appendChild(newStyleEl)\n    } else if (styleSheet.href) {\n      // for <link> elements loading CSS from a URL\n      const newLinkEl = target.createElement('link')\n\n      newLinkEl.rel = 'stylesheet'\n      newLinkEl.href = styleSheet.href\n      headFrag.appendChild(newLinkEl)\n    }\n  })\n\n  target.head.appendChild(headFrag)\n}\n\n/**\n * Make keyframe rules.\n * @param {CSSRule} cssRule\n * @return {String}\n * @private\n */\n\nfunction getKeyFrameText(cssRule) {\n  const tokens = ['@keyframes', cssRule.name, '{']\n  Array.from(cssRule.cssRules).forEach(cssRule => {\n    // type === CSSRule.KEYFRAME_RULE should always be true\n    tokens.push(cssRule.keyText, '{', cssRule.style.cssText, '}')\n  })\n  tokens.push('}')\n  return tokens.join(' ')\n}\n\n/**\n * Handle local import urls.\n * @param {CSSRule} cssRule\n * @return {String}\n * @private\n */\n\nfunction fixUrlForRule(cssRule) {\n  return cssRule.cssText\n    .split('url(')\n    .map(line => {\n      if (line[1] === '/') {\n        return `${line.slice(0, 1)}${window.location.origin}${line.slice(1)}`\n      }\n      return line\n    })\n    .join('url(')\n}\n\n/**\n * Convert features props to window features format (name=value,other=value).\n * @param {Object} obj\n * @return {String}\n * @private\n */\n\nfunction toWindowFeatures(obj) {\n  return Object.keys(obj)\n    .reduce((features, name) => {\n      const value = obj[name]\n      if (typeof value === 'boolean') {\n        features.push(`${name}=${value ? 'yes' : 'no'}`)\n      } else {\n        features.push(`${name}=${value}`)\n      }\n      return features\n    }, [])\n    .join(',')\n}\n\n/**\n * Component export.\n * @private\n */\n\nexport default NewWindow\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_typeof","obj","Symbol","iterator","constructor","prototype","_possibleConstructorReturn","self","call","TypeError","ReferenceError","assertThisInitialized","_getPrototypeOf","getPrototypeOf","propTypesModule","exports","ReactPropTypesSecret","ReactPropTypesSecret_1","emptyFunction","emptyFunctionWithReset","resetWarningCache","factoryWithThrowingShims","shim","propName","componentName","location","propFullName","secret","err","Error","name","getShim","isRequired","ReactPropTypes","array","bool","func","number","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","require$$2","value","NewWindow","subClass","superClass","create","React","PureComponent","Constructor","protoProps","staticProps","_this","instance","_classCallCheck","this","_super","container","window","windowCheckerInterval","released","state","mounted","ReactDOM","createPortal","children","openChild","setState","_this2","_this$props","url","title","features","onBlock","onOpen","center","undefined","width","height","left","top","outerWidth","screenX","outerHeight","screenY","screenLeft","screen","screenTop","innerWidth","document","documentElement","clientWidth","innerHeight","clientHeight","console","warn","open","keys","reduce","push","join","createElement","setInterval","closed","release","getElementById","setAttribute","body","appendChild","staticContainer","removeChild","copyStyles","setTimeout","source","headFrag","createDocumentFragment","Array","from","styleSheets","forEach","styleSheet","rules","cssRules","error","ruleText","cssRule","type","CSSRule","UNKNOWN_RULE","returnText","KEYFRAMES_RULE","tokens","keyText","style","cssText","getKeyFrameText","IMPORT_RULE","FONT_FACE_RULE","includes","split","map","line","slice","origin","fixUrlForRule","newStyleEl","textContent","href","newLinkEl","rel","head","addEventListener","closeOnUnmount","close","clone","cloneNode","clearInterval","onUnload","propTypes"],"mappings":"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"}